<div class="notifications-container">
  <!-- Notifications List -->
  <div class="notifications-panel">
    <div class="notifications-header">
      <h2>Powiadomienia</h2>
      <button class="mark-all-btn" (click)="markAllAsRead()" *ngIf="notifications().length > 0">
        Oznacz wszystkie jako przeczytane
      </button>
    </div>

    <div class="loading-container" *ngIf="isLoading()">
      <mat-spinner diameter="40"></mat-spinner>
    </div>

    <div class="no-notifications" *ngIf="!isLoading() && notifications().length === 0">
      <p>Brak powiadomień</p>
    </div>

    <div 
      class="notification-item" 
      *ngFor="let notif of notifications()"
      [class.new]="!notif.read"
      [class.friend-request]="isFriendRequest(notif)"
      (click)="!isFriendRequest(notif) && markAsRead(notif)">
      <div class="notif-avatar">
        <img [src]="notif.actorAvatarUrl || getDefaultAvatar(notif.actorUsername || 'system')" 
             [alt]="notif.actorUsername || 'System'">
      </div>
      <div class="notif-content">
        <span class="notif-username">{{ notif.actorUsername || 'System' }}</span>
        <span class="notif-text">{{ getNotificationText(notif) }}</span>
        <span class="notif-message" *ngIf="notif.message">{{ notif.message }}</span>
        <span class="notif-time">{{ formatTime(notif.createdAt) }}</span>
        
        <!-- Friend Request Actions -->
        <div class="friend-request-actions" *ngIf="isFriendRequest(notif)">
          <button class="accept-btn" (click)="acceptFriendRequest(notif, $event)">
            <span>Akceptuj</span>
          </button>
          <button class="decline-btn" (click)="declineFriendRequest(notif, $event)">
            <span>Odrzuć</span>
          </button>
        </div>
      </div>
      <div class="notif-indicator" *ngIf="!notif.read"></div>
    </div>
  </div>

  <!-- Ads Section -->
  <div class="ads-section">
    <div class="ad-card" *ngFor="let ad of ads">
      <div class="ad-image" [style.background-image]="'url(' + ad.image + ')'"></div>
    </div>
  </div>
</div>
